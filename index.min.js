const nowplaying=document.querySelector(".now-playing"),recentlyPlayedDiv=document.querySelector(".recently-played-container"),toggle=document.querySelector("#toggle"),nowPlayingEndpoint="https://bxradio.seanw.io/nowplaying",recentlyPlayedEndpoint="https://bxradio.seanw.io/recentlyplayed";function getArtistText(e){let n="";for(let t=0;t<e.length;t++)t>0&&e.length>2&&(n+=", "),t>0&&t===e.length-1&&(n+=" and "),n+=`<span onclick="window.open('${e[t].url}', '_blank')">`+e[t].name+"</span>";return n}const renderNowPlaying=e=>{let n=e.images.find(e=>640===e.width);null===n&&((n={}).url="static/generic-album.png"),nowplaying.innerHTML=`\n    <div class="now-playing-container">\n      <label>Now Playing</label>\n      <div class="now-playing-info">\n        <div class="now-playing-title" onclick="window.open('${e.url}', '_blank')">${e.title}</div>\n        <div class="now-playing-artist">${getArtistText(e.artist)}</div>\n      </div>\n    </div>\n    <div class="now-playing-img" onclick="window.open('${e.url}', '_blank')">\n      <img src=${n.url} alt=${e.title} />\n    </div>\n  `,setTimeout(fetchNowPlaying,e.duration-e.progress)},renderRecentlyPlayed=e=>{let n="";e.forEach(e=>{let t=e.images.find(e=>64===e.width);null===t&&((t={}).url="static/generic-album.png"),n+=`\n      <div class="single-song-container" \n          onclick="window.open('${e.url}', '_blank')">\n          <img\n            src=${t.url}\n            alt=${e.title}\n            class="single-song-image"\n          />\n          <div class="single-song-content">\n            <div class="single-song-title">${e.title}</div>\n            <div class="single-song-artist">${getArtistText(e.artist)}</div>\n          </div>\n      </div>\n    `}),recentlyPlayedDiv.innerHTML=n},displayNotPlaying=()=>{nowplaying.innerHTML='\n    <div class="now-playing-container">\n      <div class="now-playing-info">\n        <div class="now-playing-title">No music is playing</div>\n      </div>\n    </div>\n    <div class="now-playing-img">\n      <img src="./images/generic-image.png" alt="Generic Cover Image" />\n    </div>\n  '},fetchNowPlaying=()=>{fetch(nowPlayingEndpoint).then(e=>{if(204!==e.status)return e.json();nowplaying.innerHTML='\n    <div class="now-playing-container">\n      <div class="now-playing-info">\n        <div class="now-playing-title">No music is playing</div>\n      </div>\n    </div>\n    <div class="now-playing-img">\n      <img src="./images/generic-image.png" alt="Generic Cover Image" />\n    </div>\n  '}).then(e=>{setTimeout(fetchRecentlyPlayed,e.duration-e.progress+6500),renderNowPlaying(e)}).catch(e=>console.log(e))},fetchRecentlyPlayed=()=>{fetch(recentlyPlayedEndpoint).then(e=>e.json()).then(renderRecentlyPlayed).catch(e=>console.log(e))},displaySongs=()=>{setTheme(),fetchNowPlaying(),fetchRecentlyPlayed()},styles={blue:{"--theme-background-color":"linear-gradient(0deg, #0047c8 0%, #0080d4 75%)","--theme-text-color":"#f8e71c","--theme-single-hover-background-color":"#0266c1","--theme-single-background-color":"#0047C8","--theme-single-shadow":"0px 2px 8px 2px rgba(0, 0, 0, 0.1)"},dark:{"--theme-background-color":"linear-gradient(0deg,rgba(0, 0, 0, 1) 0%, rgba(57, 57, 67, 1) 75%)","--theme-text-color":"#0085ff","--theme-single-hover-background-color":"#111112","--theme-single-background-color":"#18181d","--theme-single-shadow":"0px 2px 12px 2px rgba(0, 0, 0, 0.4)"}},setTheme=()=>{if("undefined"!=typeof Storage&&void 0!==localStorage.theme){const e=JSON.parse(localStorage.theme);Object.keys(e.theme).map(n=>{document.documentElement.style.setProperty(n,e.theme[n])}),toggle.checked=e.toggled}},toggleTheme=e=>{e.target.checked?(Object.keys(styles.blue).map(e=>{document.documentElement.style.setProperty(e,styles.blue[e])}),storeTheme(styles.blue,e.target.checked)):(Object.keys(styles.dark).map(e=>{document.documentElement.style.setProperty(e,styles.dark[e])}),storeTheme(styles.dark,e.target.checked))},storeTheme=(e,n)=>{"undefined"!=typeof Storage&&(localStorage.theme=JSON.stringify({theme:e,toggled:n}))};setTheme(),fetchNowPlaying(),fetchRecentlyPlayed(),toggle.addEventListener("change",toggleTheme);